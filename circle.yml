dependencies:
  pre:
    # this list exists because CircleCI's version of xctool might not always be the latest
    # the pre-build step forces an update to the latest
    - brew uninstall xctool && brew install --HEAD xctool
    - git submodule update --init --recursive
machine:
  xcode:
    version: "7.0"
  environment:
    XCODE_WORKSPACE: PopTop.xcworkspace
    XCODE_SCHEME: "PopTop"
test:
  override:
    - xctool
      -reporter pretty
      CODE_SIGNING_REQUIRED=NO
      CODE_SIGN_IDENTITY=
      PROVISIONING_PROFILE=
      -destination 'platform=iOS Simulator,name=iPad 2,OS=latest'
      -sdk iphonesimulator
      -workspace PopTop.xcworkspace
      -scheme "PopTop"
      build build-tests run-tests
